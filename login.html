<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title data-lang="login.title">Login | Z2Runtime</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="js/lang.js" defer></script>
  <script src="js/auth.js" defer></script>
</head>
<body>
  <div class="container mt-5" style="max-width: 400px;">
    <h2 data-lang="login.header">Giriş Yap</h2>
    <form id="loginForm">
      <div class="mb-3">
        <label for="username" class="form-label" data-lang="login.usernameLabel">Kullanıcı Adı</label>
        <input type="text" class="form-control" id="username" required />
      </div>
      <div class="mb-3">
        <label for="password" class="form-label" data-lang="login.passwordLabel">Parola</label>
        <input type="password" class="form-control" id="password" required />
      </div>
      <button type="submit" class="btn btn-primary" data-lang="login.submitBtn">Giriş</button>
      <a href="register.html" class="btn btn-link" data-lang="login.registerLink">Yeni misin? Kayıt ol</a>
    </form>
  </div>

<script>
  const form = document.getElementById("loginForm");
  form.addEventListener("submit", e => {
    e.preventDefault();
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();

    const savedUsername = localStorage.getItem("registeredUsername");
    const savedPassword = localStorage.getItem("registeredPassword");

    if (username === savedUsername && password === savedPassword) {
      localStorage.setItem("loggedIn", "true");
      localStorage.setItem("username", username);
      alert(currentLangData["login.successMsg"] || "Giriş başarılı!");
      window.location.href = "forum.html";
    } else {
      alert(currentLangData["login.errorMsg"] || "Kullanıcı adı veya parola yanlış.");
    }
  });
</script>

</body>
</html>
